{% extends 'base.html' %}
{% load static %}
{% load widget_tweaks %}

{% block content %}
<div class="container mx-auto p-4">
    {# 表示モード切り替えトグル #}
    <div class="flex justify-end items-center mb-4">
        <form method="post" action="{% url 'cards:toggle_view_mode' %}">
            {% csrf_token %}
            <label class="flex items-center gap-2 cursor-pointer">
                <span class="text-sm">カード表示</span>
                <input type="checkbox"
                       class="toggle toggle-primary"
                       onchange="this.form.submit()"
                       {% if request.session.view_mode == 'table' %}checked{% endif %}>
                <span class="text-sm">テーブル表示</span>
            </label>
        </form>
    </div>

    {# 検索フォーム ここから #}
    <div class="fieldset bg-base-200 border-warning rounded-box w-xs border p-4">
        <legend class="fieldset-legend font-bold mb-4">カード検索</legend>
        <form method="get"
            hx-get="{% url 'cards:trainer_card_list' %}"
            hx-trigger="change, submit"
            hx-target="#card-list-container"
            hx-swap="innerHTML">
                        {% include "cards/_trainer_search_form.html" %}
        </form>
    </div>
    {# 検索フォーム ここまで #}

    {# HTMXが更新するターゲットコンテナ #}
    <div id="card-list-container" class="mt-3">
        {% include "cards/_card_list_content.html" %}
    </div>

</div>
{% endblock content %}
