{% load static %}
<tr id="card-{{ card.pk }}">
    <td class="text-center">
        {% if card.image %}
            <img src="{{ card.image.url }}" alt="{{ card.name }}" class="w-16 h-20 object-cover rounded mx-auto">
        {% else %}
            <img src="{% static 'images/nonepic.png' %}" alt="{{ card.name }}" class="w-16 h-20 object-cover rounded mx-auto">
        {% endif %}
    </td>
    <td class="font-semibold">{{ card.name }}</td>
    <td class="text-center">
        {% if card.category.slug == 'pokemon' %}
            {% if card.evolution_stage %}
                <span class="badge badge-neutral badge-outline whitespace-nowrap">{{ card.evolution_stage.name }}</span>
            {% endif %}
        {% elif card.category.slug == 'trainers' %}
            {% if card.trainer_type %}
                <span class="badge whitespace-nowrap" style="background-color: {{ card.trainer_type.bg_color }}; color: {{ card.trainer_type.text_color }}; border-color: {{ card.trainer_type.text_color }};">{{ card.trainer_type.name }}</span>
            {% endif %}
        {% endif %}
    </td>
    <td class="text-center">
        <div class="flex flex-wrap gap-1 justify-center">
            {% if card.category.slug == 'pokemon' %}
                {% for type in card.types.all %}
                    <span class="badge badge-sm whitespace-nowrap" style="background-color: {{ type.bg_color }}; color: {{ type.text_color }};">{{ type.name }}</span>
                {% endfor %}
            {% elif card.category.slug == 'trainers' %}
                {% for st in card.special_trainers.all %}
                    <span class="badge badge-sm whitespace-nowrap" style="background-color: {{ st.bg_color }}; color: {{ st.text_color }};">{{ st.name }}</span>
                {% endfor %}
            {% endif %}
        </div>
    </td>
    <td class="text-center">
        <div class="flex items-center gap-2 justify-center">
            <span class="font-bold text-lg">{{ card.quantity }}</span>
            <div class="btn-group btn-group-vertical">
                <button class="btn btn-primary btn-xs"
                        hx-post="{% url 'cards:increase_card_quantity' card.pk %}"
                        hx-target="#card-{{ card.pk }}"
                        hx-swap="outerHTML">+</button>
                <button class="btn btn-secondary btn-xs"
                        hx-post="{% url 'cards:decrease_card_quantity' card.pk %}"
                        hx-target="#card-{{ card.pk }}"
                        hx-swap="outerHTML">-</button>
            </div>
        </div>
    </td>
    <td class="text-center">
        <button class="btn btn-neutral btn-xs"
                hx-get="{% url 'cards:card_detail_modal' card.pk %}"
                hx-target="body"
                hx-swap="beforeend">詳細</button>
    </td>
    <td class="text-center">
        <div class="flex gap-1 flex-wrap justify-center">
            <button class="btn btn-ghost btn-xs"
                    hx-get="{% url 'cards:card_edit' card.pk %}"
                    hx-target="#dialog-target">編集</button>
            <button class="btn btn-ghost btn-xs text-error"
                    hx-get="{% url 'cards:card_delete' card.pk %}"
                    hx-target="#dialog-target">削除</button>
        </div>
    </td>
</tr>
